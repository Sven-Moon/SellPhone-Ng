
<div id="pageContainer"
  class="row">
  <div id="mainFormColumn"
    class="col-7 d-flex justify-content-center">
    <form [formGroup]='saleOrderForm' class="py-1" (change)="calcSale()">

      <label>
        Order Id: <input  formControlName="orderId" />
      </label>


      <div formArrayName="orderDetails"
        class="perk-box rounded-lg py-2 px-3 bg-secondary text-white my-2"
        (change)="onOrderDetailsChange()">

        <div *ngFor="let od of orderDetails.controls;
          let detailsIndex=index"
          [formGroupName]="detailsIndex">

        <div id="typeFormGroup" class="form-group">
          <label>Phone Type: </label>
          <select formControlName="phoneType"
            placeholder="Phone Type"
            id="phoneType"
            (change)="onSelectedPhoneTypeChange($event)"
            class="form-control">
            Type
            <option selected disabled hidden>--Select Your Phone Type --</option>
            <option [ngValue]="phoneType.typeId"
            *ngFor="let phoneType of phoneTypesList"
            id="{{phoneType.typeId}}"
            >{{phoneType.name}}</option>
          </select>
        </div>

        <div id="modelFormGroup" class="form-group">
          <label>Phone Model: </label>
          <select formControlName="phoneModel"
            id="phoneModel"
            (change)="onSelectedPhoneModelChange($event)"
            class="form-control">
            Model
            <ng-container *ngFor="let phoneModel of (phoneModelList$ | async)">
              <option selected disabled hidden>-- Select Your Model --</option>
              <option id="{{phoneModel.modelId}}"
                [ngValue]="phoneModel.modelId"
                >{{phoneModel.name}}</option>
            </ng-container>
          </select>
        </div>

        <div id="conditionFormGroup" class="form-group">
          <label>Condition: </label>
          <select formControlName="phoneConditionControl"
            (change)="changeCondition($event)"
            class="form-control">
            <option value="" disabled hidden>
              Condition
            </option>
            <option *ngFor="let condition of conditionsList">
              {{condition.id}}
            </option>
          </select>
        </div>

        <div id="quantityFormGroup" class="form-group">
          <label>Quantity: </label>
          <input formControlName="quantity"
            id="quantity" type="text" class="form-control">
        </div>

        <div id="orderDetailActionsArea"
          class="row-col-2 d-flex justify-content-md-between align-content-center">
          <button (click)="deleteOrderDetails(detailsIndex)"
            class="btn-danger button-narrow rounded m-1 h6">
            Remove
          </button>
          <label class="rounded-0">
            Subtotal: <!--${{orderSubtotal}}-->
          </label>
        </div>

        </div> <!-- ngFor -->

      </div> <!--orderDetails formArray -->


      <div id="repeatButtons"
      class="btn-group-sm d-flex justify-content-center row-cols-2">
      <button  (click)="addOrderDetails()"
        class="btn-dark button-narrow rounded m-1 h6">
        Add Phones
      </button>
    </div>

    </form>  <!-- saleOrderForm -->
  </div> <!-- form column -->

  <div id="sideBarRunningTotal" class="col-5">
    <div id="floatingTotal"
      class=" sidebar-item mt-5">
      <div class="perk-box rounded-lg bg-green make-me-sticky">I will give you da money!
        {{saleOrderForm.value | json}}
      </div>
    </div>
  </div>

</div>  <!--  pageContainer  -->

<div id="page-centeredButtonGroup-bot"
  class="d-flex justify-content-center">
  <button id="submitButton"
    type="button" class="btn-lg btn-primary m-1"
    >Get to the Money!</button>
</div>
